<!-- TEST 20:09 -->
<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<title>Logic Stick Trial</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
  body { margin:0; background:black; }
  canvas { display:block; }
</style>
</head>

<body>
<canvas id="c"></canvas>

<script>
const c = document.getElementById("c");
const ctx = c.getContext("2d");
c.width = innerWidth;
c.height = innerHeight;

// ===== PLAYER =====
const player = { x: 60, y: 200, size: 18 };

// ===== LOGIC TILES =====
const tiles = [
  { x:150, y:200, ok:true },
  { x:230, y:200, ok:false },
  { x:310, y:200, ok:true },
  { x:390, y:200, ok:true },
  { x:470, y:200, ok:false },
  { x:550, y:200, ok:true }
];

const startX = player.x;

// ===== INPUT =====
addEventListener("keydown", e => {
  if (e.key === "ArrowRight") move(1);
  if (e.key === "ArrowLeft") move(-1);
});

// ===== MOVE LOGIC =====
function move(dir){
  player.x += dir * 80;

  const tile = tiles.find(t =>
    Math.abs(player.x - t.x) < 20 &&
    Math.abs(player.y - t.y) < 20
  );

  if (tile && !tile.ok) reset();
}

// ===== RESET =====
function reset(){
  player.x = startX;
}

// ===== DRAW =====
function draw(){
  ctx.clearRect(0,0,c.width,c.height);

  // Tiles
  tiles.forEach(t=>{
    ctx.fillStyle = t.ok ? "#0f0" : "#400";
    ctx.fillRect(t.x-20, t.y-20, 40, 40);
  });

  drawStick(player.x, player.y);
  requestAnimationFrame(draw);
}

// ===== STICK =====
function drawStick(x,y){
  ctx.strokeStyle="white";
  ctx.lineWidth=2;

  ctx.beginPath(); // head
  ctx.arc(x, y-12, 8, 0, Math.PI*2);
  ctx.stroke();

  ctx.beginPath(); // body
  ctx.moveTo(x, y);
  ctx.lineTo(x, y+25);
  ctx.stroke();

  ctx.beginPath(); // arms
  ctx.moveTo(x-10,y+10);
  ctx.lineTo(x+10,y+10);
  ctx.stroke();

  ctx.beginPath(); // legs
  ctx.moveTo(x,y+25);
  ctx.lineTo(x-8,y+40);
  ctx.moveTo(x,y+25);
  ctx.lineTo(x+8,y+40);
  ctx.stroke();
}

draw();
</script>
</body>
</html>
